{{#let (component 'g-map/canvas' onCanvasReady=(fn this.getCanvas)) as |Canvas|}}
  {{#unless (has-block-params)}}
    {{!-- Compatibility: @classNames should be deprecated --}}
    <Canvas class={{@classNames}} ...attributes />
  {{/unless}}

  {{#let (hash
    map=this.map
    canvas=Canvas
    marker=(component 'g-map/marker' getContext=(fn this.getComponent))
    circle=(component 'g-map/circle' getContext=(fn this.getComponent))
    polyline=(component 'g-map/polyline' getContext=(fn this.getComponent))
    directions=(component 'g-map/directions' getContext=(fn this.getComponent))
    control=(component 'g-map/control' getContext=(fn this.getComponent))
    overlay=(component 'g-map/overlay' getContext=(fn this.getComponent))
    infoWindow=(component 'g-map/info-window' getContext=(fn this.getComponent))
    autocomplete=(component 'g-map/autocomplete' getContext=(fn this.getComponent))
  ) as |context|}}

    {{#each-in (macroGetOwnConfig "addons") as |name addon|}}
      {{g-map-assign
        context
        key=name
        value=(component addon getContext=(fn this.getComponent))
      }}
    {{/each-in}}

    {{yield context}}
  {{/let}}
{{/let}}